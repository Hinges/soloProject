var app=angular.module("myApp",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/login.html",controller:"loginController"}).when("/registration",{templateUrl:"views/registration.html",controller:"registerController"}).when("/admin",{templateUrl:"views/userAdmin.html",controller:"adminController"}).when("/user",{templateUrl:"views/userChild.html",controller:"childController"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]),app.controller("loginController",["$scope","$http","$location",function(a,b,c){a.submitData=function(){b.post("/",a.data).then(function(b){"failure"==b.data&&(console.log("failure hit"),a.update=!0),c.path(b.data.role)})}}]),app.controller("registerController",["$scope","$http","$location",function(a,b,c){}]),app.controller("adminController",["$scope","$http","$location",function(a,b,c){a.newTask={},a.newUser={},a.startPage=function(){b.get("/success").then(function(b){console.log(b),a.items=b.data.sub_users})},a.startPage(),a.updatePage=function(){b.post("/updateMainUser",a.newTask.selectedUser).then(function(b){a.userTasks="",a.items=b.data.sub_users})},a.currentSubuserFunc=function(){a.doneTask=0,a.currentSubuser=a.newTask.selectedUser,a.userTasks=a.newTask.selectedUser.assigned_task;for(var b=0;b<a.newTask.selectedUser.assigned_task.length;b++)4===a.newTask.selectedUser.assigned_task[b].task_priority&&(void 0!=a.newTask.selectedUser.assigned_task[b].task_money?a.totalMoneyCollect+=a.newTask.selectedUser.assigned_task[b].task_money:a.totalMoneyCollect+=0,a.doneTask++)},a.createUser=function(){b.post("/registerUser",a.newUser).then(function(b){a.newUser={},a.updatePage()})},a.createTask=function(){b.post("/createTask",a.newTask).then(function(b){a.userTasks=b.data.subDocFind.assigned_task,a.currentSubuser=b.data.subDocFind,a.newTask.taskName="",a.newTask.taskMoney=""})},a.updatePriority=function(c){var d={scopeData:a.newTask.selectedUser,userTaskData:c};b.post("/updateUser",d).then(function(b){a.userTasks=b.data.subTaskFind.assigned_task})},a.deleteTask=function(c){var d={scopeData:a.newTask.selectedUser,userTaskData:c};b.post("/deleteTask",d).then(function(b){console.log(b.data),a.userTasks=b.data.subTaskFind.assigned_task})}}]),app.controller("childController",["$scope","$http","$location",function(a,b,c){}]);